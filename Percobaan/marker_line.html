 <!DOCTYPE html>
<html>
<head>
<script src="http://maps.google.com/maps/api/js" 
          type="text/javascript"></script>

</head>

<body>
<div id="googleMap" style="width:1200px;height:600px;"></div>

<script>
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","map.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

function getLatByAtt(str)
{
	for (n=0;n<node.length;n++)
	{
		if(node[n].getAttribute('id') == str)
		{
			return node[n].getAttribute('lat');
		}
	}
}
function getLonByAtt(str)
{
	for (m=0;m<node.length;m++)
	{
		if(node[m].getAttribute('id') == str)
		{
			return node[m].getAttribute('lon');
		}
	}
}

function isHighway(way,index){
	var tag = way[index].getElementsByTagName("tag");
	for (hg=0;hg<tag.length;hg++)
	{
		if(tag[hg].getAttribute('k') == "highway"){
			return true;
		}
	}
	return false;
}

var node=xmlDoc.getElementsByTagName("node");
var way=xmlDoc.getElementsByTagName("way");

var mapProp = {
	center:new google.maps.LatLng(-6.906845432118958,107.59851515293121),
	zoom:17,
	mapTypeId:google.maps.MapTypeId.ROADMAP
};

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var path = []; 
var nd,marker,line;
var lat1,lon1,lat2,lon2;

for (i=0;i<way.length;i++)
{
	nd = way[i].getElementsByTagName("nd");
	if(isHighway(way,i))
	{
		marker = new google.maps.Marker({
			position: new google.maps.LatLng(getLatByAtt(nd[0].getAttribute('ref')), getLonByAtt(nd[0].getAttribute('ref'))),
			map: map
		});
		
		for (j=0;j<nd.length-1;j++)
		{
			marker = new google.maps.Marker({
				position: new google.maps.LatLng(getLatByAtt(nd[j+1].getAttribute('ref')), getLonByAtt(nd[j+1].getAttribute('ref'))),
				map: map
			});
	 
			line = new google.maps.Polyline({
				path: [new google.maps.LatLng(getLatByAtt(nd[j].getAttribute('ref')), getLonByAtt(nd[j].getAttribute('ref'))),
				new google.maps.LatLng(getLatByAtt(nd[j+1].getAttribute('ref')), getLonByAtt(nd[j+1].getAttribute('ref')))],
				strokeColor: "#000000",
				strokeOpacity: 1.0,
				strokeWeight: 3,
				map: map
			});
		}
	}
}
</script>
</body>

</html> 